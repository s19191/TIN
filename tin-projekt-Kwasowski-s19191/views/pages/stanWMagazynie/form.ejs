<%- include('../../fragments/header.ejs') %>
<main>
    <h2><%= pageTitle %></h2>
    <form class="form" method="post" action="<%=formAction%>" novalidate onsubmit="return validateForm();">
        <input type="hidden" name="Id_StanWMagazynie" value="<%= swm.Id_StanWMagazynie %>">
        <label for="magazyn">Magazyn:<abbr title="required" aria-label="required">*</abbr></label>
        <select name="magazyn" id="magazyn" <%= (formMode == 'showDetails') ? 'disabled' : ''%> >
            <option value="">-- Wybierz magazyn --</option>
            <% for (let i=0; i<allMag.length; i++) { let mag = allMag[i]; %>
            <option value="<%= mag.Id_Magazyn %>" label="<%= mag.Nazwa %>"
                    <%= (swm._id && mag.Id_Magazyn.toString() == swm.magazyn.Id_Magazyn.toString()) ? 'selected' : ''%>></option>
            <% } %>
        </select>
        <span id="errorMagazyn" class="errors-text"></span>
        <label for="ksiazka">Książka:<abbr title="required" aria-label="required">*</abbr></label>
        <select name="ksiazka" id="ksiazka" <%= (formMode == 'showDetails') ? 'disabled' : ''%> >
            <option value="">-- Wybierz książkę --</option>
            <% for (let i=0; i<allKs.length; i++) { let ks = allKs[i]; %>
            <option value="<%= ks.Id_Ksiazka %>" label="<%= ks.Tytul %>"
                    <%= (swm._id && ks.Id_Ksiazka.toString() == swm.ksiazka.Id_Ksiazka.toString()) ? 'selected' : ''%>></option>
            <% } %>
        </select>
        <span id="errorKsiazka" class="errors-text"></span>
        <label for="iloscNaStanie">Ilość na stanie:<abbr title="required" aria-label="required">*</abbr></label>
        <input type="number" name="iloscNaStanie" id="iloscNaStanie">
        <span id="errorIloscNaStanie" class="errors-text"></span>
        <label for="cenaHurtowa">Cena hurtowa:</label>
        <input type="number" name="cenaHurtowa" id="cenaHurtowa" step="any">
        <span id="errorCenaHurtowa" class="errors-text"></span>
        <label for="minilamnaIloscDoCenyHurtowej">Minimalna ilość zamówienia potrzebna do naliczenia ceny hurowej:</label>
        <input type="number" name="minilamnaIloscDoCenyHurtowej" id="minilamnaIloscDoCenyHurtowej">
        <span id="errorMinilamnaIloscDoCenyHurtowej" class="errors-text"></span>
        <label for="cenaDetaliczna">Cena detaliczna:<abbr title="required" aria-label="required">*</abbr></label>
        <input type="number" name="cenaDetaliczna" id="cenaDetaliczna" step="any">
        <span id="errorCenaDetaliczna" class="errors-text"></span>
        <div class="form-buttons">
            <p id="errorsSummary" class="errors-text"></p>
            <input type="submit" class="form-button-submit" value="Dodaj" />
            <a href="/stanWMagazynie" class="form-button-cancel">Anuluj</a>
        </div>
    </form>
</main>
<%- include('../../fragments/footer.ejs') %>
<%- include('../../fragments/header.ejs') %>
<main>
    <h2><%= pageTitle %></h2>
    <form class="form" method="post" action="<%=formAction%>" novalidate onsubmit="return validateForm();">
        <input type="hidden" name="Id_StanWMagazynie" value="<%= swm.Id_StanWMagazynie %>">
        <label for="magazyn">Magazyn:<abbr title="required" aria-label="required">*</abbr></label>
        <select name="magazyn" id="magazyn" <%= (formMode == 'showDetails') ? 'disabled' : ''%> >
            <option value="">-- Wybierz magazyn --</option>
            <% for (let i=0; i<allMag.length; i++) { let mag = allMag[i]; %>
            <option value="<%= mag.Id_Magazyn %>" label="<%= mag.Nazwa %>"
                    <%= (swm.Id_StanWMagazynie && mag.Id_Magazyn.toString() == swm.magazyn.Id_Magazyn.toString()) ? 'selected' : ''%>></option>
            <% } %>
        </select>
        <span id="errorMagazyn" class="errors-text"></span>
        <label for="ksiazka">Książka:<abbr title="required" aria-label="required">*</abbr></label>
        <select name="ksiazka" id="ksiazka" <%= (formMode == 'showDetails') ? 'disabled' : ''%> >
            <option value="">-- Wybierz książkę --</option>
            <% for (let i=0; i<allKs.length; i++) { let ks = allKs[i]; %>
            <option value="<%= ks.Id_Ksiazka %>" label="<%= ks.Tytul %>"
                    <%= (swm.Id_StanWMagazynie && ks.Id_Ksiazka.toString() == swm.ksiazka.Id_Ksiazka.toString()) ? 'selected' : ''%>></option>
            <% } %>
        </select>
        <span id="errorKsiazka" class="errors-text"></span>
        <label for="IloscNaStanie">Ilość na stanie:<abbr title="required" aria-label="required">*</abbr></label>
        <input type="number" name="IloscNaStanie" id="IloscNaStanie" value="<%= swm.IloscNaStanie %>"
                <%= (formMode == 'showDetails') ? 'disabled' : '' %>/>
        <span id="errorIloscNaStanie" class="errors-text"></span>
        <label for="CenaHurtowa">Cena hurtowa:</label>
        <input type="number" name="CenaHurtowa" id="CenaHurtowa" step="any" value="<%= swm.CenaHurtowa %>"
                <%= (formMode == 'showDetails') ? 'disabled' : '' %>/>
        <span id="errorCenaHurtowa" class="errors-text"></span>
        <label for="MinimalnaIloscDoCenyHurtowej">Minimalna ilość zamówienia potrzebna do naliczenia ceny hurowej:</label>
        <input type="number" name="MinimalnaIloscDoCenyHurtowej" id="MinimalnaIloscDoCenyHurtowej" value="<%= swm.MinimalnaIloscDoCenyHurtowej %>"
                <%= (formMode == 'showDetails') ? 'disabled' : '' %>/>
        <span id="errorMinilamnaIloscDoCenyHurtowej" class="errors-text"></span>
        <label for="CenaDetaliczna">Cena detaliczna:<abbr title="required" aria-label="required">*</abbr></label>
        <input type="number" name="CenaDetaliczna" id="CenaDetaliczna" step="any" value="<%= swm.CenaDetaliczna %>"
                <%= (formMode == 'showDetails') ? 'disabled' : '' %>/>
        <span id="errorCenaDetaliczna" class="errors-text"></span>
        <% if (formMode != 'showDetails') { %>
        <div class="form-buttons">
            <p id="errorsSummary" class="errors-text"></p>
            <input type="submit" class="form-button-submit" value="<%=btnLabel%>"/>
            <a href="/stanWMagazynie" class="form-button-cancel">Anuluj</a>
            <% } %>
        </div>
    </form>
    <% if (formMode == 'showDetails') { %>
        <p><a href="/stanWMagazynie/edit/<%= swm.Id_StanWMagazynie %>" class="list-actions-button-edit">Edytuj</a></p>
        <p><a href="/magazyn" class="list-actions-button-details">Powrót</a></p>
    <% } %>
</main>
<%- include('../../fragments/footer.ejs') %>